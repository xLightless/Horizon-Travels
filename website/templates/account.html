{% extends 'base.html' %}
{% block head %}
    <link href="{{url_for('static',filename='css/account.css')}}" rel="stylesheet">
    <!-- imports elements that will later be moved to a single css file -->
    <link href="{{url_for('static',filename='css/index.css')}}" rel="stylesheet">
    <script src="https://kit.fontawesome.com/7a98244e75.js" crossorigin="anonymous"></script>
{% endblock %}


<!-- Change booking template logic to customise dashboard -->
{% block booking %}
<div>
  <div class="grid-sidebar-nav-heading small-text">
    <span>BOOKINGS</span>
  </div>
  <!-- <a class="grid-sidebar-nav-item" href="">
    <label><i class="fa-solid fa-plus pr-2"></i><span>My bookings</span></label>
    <div class="hover-circle click"></div>
  </a> -->

  <a class="grid-sidebar-nav-item">
    <label><i class="fa-solid fa-bookmark pr-2"></i><span>My Bookings</span></label>
    <div class="hover-circle click"></div>
  </a>

</div>
{% endblock %}

{% block main %}
    <!-- Dashboard Page -->
    <section class="dashboard p-3">
        <div class="dashboard-container p-3 mt-3 mb-3">
            <div class="head">
                <div class="title">ACCOUNT</div>
                <div class="edit-profile"><p class="text-small text-muted m-0 edit-profile-btn">Edit Profile</p></div>
            </div>

            <div class="head-divider"><div class="divider-item"></div></div>
            
            <div class="account-contents">

                <!-- Account contents -->
                <div class="container-fluid">
                    <div class="row">
                        <!-- User image -->
                        <div class="col-12 col-xl-3 p-3 d-flex justify-content-center">
                            <div class="image-uploader"></div>
                        </div>

                        <div class="col-xl-3 p-1 d-flex justify-content-center flex-column">
                            <p class="account-info m-0"><span class="fw-bold">Name: </span>{{current_fname | capitalize}} {{current_lname | capitalize}}</p>
                            <p class="account-info m-0"><span class="fw-bold">Date of Birth: </span>2000-03-08</p>
                        </div>

                        <div class="col-xl-3 p-1 d-flex justify-content-center flex-column">
                            <p class="account-info m-0"><span class="fw-bold">Email: </span>{{current_email}}</p>
                            <p class="account-info m-0"><span class="fw-bold">Phone Number: </span>{{current_telephone}}</p>
                        </div>
                        
                        <div class="col-xl-3 p-1 d-flex justify-content-center flex-column">
                            <p class="account-info m-0"><span class="fw-bold">Default Payments: </span>PayPal</p>
                            <p class="account-info m-0"><span class="fw-bold">Currency: </span>GBP</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="dashboard-container p-3 mt-3 mb-3 bookings">
          <div class="head">
              <div class="title w-100">MY BOOKINGS</div>
              <!-- <div class="edit-profile text-small text-muted w-75">Travel payments are determined by the date of travel. Therefore, paid travel will be ‘Pending’ until the date else ‘Approved’.</div> -->
          </div>
          <div class="head-divider"><div class="divider-item"></div></div>

          <div class="mybookings">
            <form method="post" action="{{url_for('auth.cancel_booking')}}" class="w-100">
              <div class="table-responsive" style="overflow: auto;">
                <table class="table table-light table-hover mybookings-table">
                  <!-- <caption>List of users</caption> -->
                  <thead class="mybookings-thead">
                    <tr>
                      <th scope="col"></th>
                      <th scope="col">Going From</th>
                      <th scope="col">Going To</th>
                      <th scope="col">Commute Type</th>
                      <th scope="col">Total Cost</th>
                      <th scope="col">Payment Method</th>
                      <th scope="col">Payment Date</th>
                      <th scope="col">Status</th>
                      <th scope="col">Payment ID</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for key, value in booking_data.items() %}
                    <tr>
                      <th scope="row">
                        <input type="submit" class="cancel-booking-btn" value="X">
                      </th>
                        {% for key2 in value %}

                          <td>{{ booking_data[key][key2] }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}

                  </tbody>
                </table>
              </div>
            </form>
          </div>
        </div>

    </section>


{% endblock %}
